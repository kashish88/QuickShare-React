{"ast":null,"code":"var _jsxFileName = \"/Users/kashish/Documents/Instagram_Clone-React/src/ImageUpload.js\";\nimport React, { useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport { storage, db } from './firebase';\nimport './ImageUpload.css';\n\nfunction ImageUpload({\n  username\n}) {\n  const [caption, setCaption] = useState('');\n  const [image, setImage] = useState(null);\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\"state_changed\", snapshot => {\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      console.log(error);\n      alert(error.message);\n    }, () => {\n      storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n        db.collection(\"posts\").add({\n          //timestamp:firebase.firestore.FieldValue.serverTimestamp(),\n          caption: caption,\n          imageUrl: url,\n          username: username\n        });\n        setProgress(0);\n        setCaption(\"\");\n        setImage(null);\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageUpload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"progress\", {\n    className: \"imageUpload_progress\",\n    value: progress,\n    max: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"i\",\n    type: \"text\",\n    placeholder: \"Write a caption...\",\n    onChange: event => setCaption(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"file\",\n    type: \"file\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"file\",\n    class: \"btn-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, \"Choose file\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"e\",\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, \"Upload\"));\n}\n\nexport default ImageUpload;","map":{"version":3,"sources":["/Users/kashish/Documents/Instagram_Clone-React/src/ImageUpload.js"],"names":["React","useState","Button","storage","db","ImageUpload","username","caption","setCaption","image","setImage","progress","setProgress","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","collection","add","imageUrl","event","value"],"mappings":"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","sourcesContent":["import React ,{useState} from 'react'\nimport { Button } from '@material-ui/core';\nimport {storage,db} from './firebase'\nimport './ImageUpload.css';\nfunction ImageUpload({username}) {\n\nconst [caption,setCaption]=useState('');\nconst [image,setImage]=useState(null);\nconst [progress,setProgress]=useState(0);\n\n\nconst handleChange=(e)=>{\n    if(e.target.files[0]){\n        setImage(e.target.files[0])\n    }\n}\n\nconst handleUpload=()=>{\n   const uploadTask=storage.ref(`images/${image.name}`).put(image);\n   uploadTask.on(\n       \"state_changed\",\n       (snapshot)=>{\n           const progress=Math.round (\n               (snapshot.bytesTransferred/snapshot.totalBytes)*100\n           );\n           setProgress(progress);\n       },\n       (error)=>{\n           console.log(error);\n           alert(error.message)\n       },\n       ()=>{\n           storage\n           .ref(\"images\")\n           .child(image.name)\n           .getDownloadURL()\n           .then(url=>{\n               db.collection(\"posts\").add({\n                   //timestamp:firebase.firestore.FieldValue.serverTimestamp(),\n                   caption:caption,\n                   imageUrl:url,\n                   username:username\n               });\n               setProgress(0);\n               setCaption(\"\");\n               setImage(null);\n           })\n       }\n\n   )\n}\n\n    return (\n        <div className=\"imageUpload\">\n        <progress className=\"imageUpload_progress\" value={progress} max=\"100\"></progress>\n          <input className=\"i\" type=\"text\" placeholder='Write a caption...' onChange={event=>setCaption(event.target.value)} ></input>\n          <input  id=\"file\" type=\"file\" onChange={handleChange} />\n          <label for=\"file\" class=\"btn-1\">Choose file</label>\n          <Button className=\"e\" onClick={handleUpload}>Upload</Button>\n        </div>\n    )\n}\n\nexport default ImageUpload\n"]},"metadata":{},"sourceType":"module"}